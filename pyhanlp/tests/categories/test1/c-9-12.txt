**题目**
基于SoC的实时红外图像高速通道设计与研究
**关键字**
高速通道,片上系统,实时,红外图像,逻辑描述,伪彩色,模型
**摘要**
随着红外传感器品质及其应用目标的不断提高,要求热像仪中信息处理部件---红外图像高速通道性能与之匹配。信息技术的飞速发展为高速通道性能的提高提供了广阔前景。SoC(System on Chip,片上系统)强调软硬件协同信息处理,充分发挥硬件实时处理和软件功能灵活的优势,提高系统整体性能。
针对红外图像高速通道输入、处理和输出三个部分,设计了同步接口状态机、数据处理逻辑和伪彩色显示三大模块。设计将传统的用户硬联逻辑嵌入到SoC系统中,以Altera SOPC为原型实现了红外图像采集、处理与显示。并在此基础上提出红外图像高速通道模型描述,使红外通道设计提高到设计学的高度。
同步接口作为红外图像高速通道的前端,接收传感器输出信号,完成输入的转换与解码。有两种方式实现视频数据同步采集:方式一为同步A/D采集,完全由用户逻辑控制,特点是设计灵活;另一方式则是利用视频编解码器的中间结果,通过状态机提取同步数据,优点是兼容性好。编解码器通过I2C总线与配置文件,使得逻辑功能与配置参数分离,HDL(Hardware Description Language,硬件描述语言)设计代码维护更加容易。同步状态机的四个核心进程---水平消隐、垂直消隐、水平计数和垂直计数是整个高速通道数据处理基础。
数据处理逻辑接收同步接口状态机转换的传感器数据,对其进行缓存、传输和处理,以期提高数据信噪比和改善图像质量。它包括数据缓存、总线胶合和特征数据处理三个主要模块。数据缓存采用了双口RAM和帧行FIFO两种形式。双口RAM是采集接口和CPU共享数据资源的一个有效且成熟的构架,将用户逻辑与双口逻辑有机融合,与传统双口RAM相比具有更加灵活的总线协议接口。利用FPGA(Field Programmable Gate Array,现场可编程门阵列)片上RAM,提出了帧缓存和行缓存方式以适合不同的系统构成。采用PLD(Programmable Logic Device,可编程逻辑器件)技术的胶合逻辑能够适配多种CPU总线,通过更新其中的逻辑编程以满足不同的系统构架。十字线点温测量硬联逻辑作为数据测量的基本功能,是红外检测的基础。
热像显示是SoC实时红外图像高速通道最终输出结果,一方面提供被测目标客观特征数据,同时也向用户展示可视化温度分布信息,直观全面地了解对象,有助于现场诊断。采用伪彩色图像增强SoC技术在功能上实现了检测数据可视化,在效率上做到了热像实时显示。设计分为两个层次:底层由“数据位直联”和“RAM调色板”逻辑模块完成数据到色彩的基本映射关系;然后通过Altera Nios嵌入式处理器和Avalon片上总线在SoC层实现了伪彩色显示。用户逻辑模块封装体现了IP Core(Intellectual Property Core,知识产权核)再使用原则,充分保护设计投资。
借鉴UML(Unified Modeling Language,统一建模语言)和Petri网建模理论,提出了红外高速通道模型,据此建立了红外图像处理系统高速通道的双FIFO缓存工作模式状态图模型和Petri网模型HDL描述。
研究概述了当前主流设计模式,并给出作者研发的多个模型性能结果。其主要创新点在于:采用SoC技术设计红外图像高速通道,保证信号采集、数据处理和信息显示的实时性;充分利用PLD片上可编程资源,建立了逻辑双口RAM和多FIFO行缓存灵活机制的红外图像高速通道存储构架;运用嵌入式处理器Nios“用户定制指令”和“Avalon模块”手段作为处理关键算法的有效手段,实现红外图像伪彩色实时显示;借鉴UML与Petri网丰富的模型语义提出红外图像高速通道模型规约,保证了较高的抽象层描述的正确性。
最后,根据作者主持的研究课题列出三类红外高速通道的性能结果,揭示了各自特性。即(1)SoC技术采用HDL逻辑功能描述、片上处理器软硬件协同开发模式实现数据实时处理(;2)PLD接口通过其强大的硬件功能作为接口或桥拓展CPU I/O,完成数据的采集与显示;(3)集成电子在原有系统的基础上,整合分散的电子硬件功能,实现系统集成化、小型化。展望未来,掌握SoC设计理念,采用可执行模型描述设计方法学,将ADL(Architecture Description Language,系统结构描述语言)、ASIP(Application Specific Instruction Processor,专用指令集处理器)等先进技术融入系统实现,使红外高速通道性能产生质的飞跃!
